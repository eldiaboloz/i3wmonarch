https://wiki.archlinux.org/index.php/Installation_guide

# enable ntp
timedatectl set-ntp true

# setup partitions
fdisk /dev/sda

# setup filesystems
mkfs.ext4 /dev/sda1
...

# mount new fs
mount /dev/sda1 /mnt
mount /dev/sda2 /mnt/home
mount /dev/sda3 /mnt/work

# begin setup
pacstrap /mnt base base-devel

# generate fstab
genfstab -U /mnt >> /mnt/etc/fstab

# chroot
arch-chroot /mnt

# set timezone
ln -s /usr/share/zoneinfo/Europe/Sofia /etc/localtime

# setup hwc
hwclock --systohc

# setup locale
echo "en_US.UTF-8 UTF-8" >> /etc/locale.gen
locale-gen
echo "LANG=en_US.UTF-8" >> /etc/locale.conf
echo "LC_COLLATE=C" >> /etc/locale.conf

# hostname
myhostname="iliyan-arch-work"
echo "${myhostname}" >> /etc/hostname
echo "127.0.1.1	${myhostname}.localdomain ${myhostname}" >> /etc/hosts

# Initramfs
mkinitcpio -p linux

# root password
passwd

# setup grub
pacman -S grub os-prober 
grub-install --target=i386-pc /dev/sdx
grub-mkconfig -o /boot/grub/grub.cfg

# pacman
echo 'Server = http://mirror.telepoint.bg/archlinux/$repo/os/$arch' >> /etc/pacman.d/mirrorlist

# keep boot messages on login tty
mkdir -pv "/etc/systemd/system/getty@tty1.service.d"
cat /etc/systemd/system/getty@tty1.service.d/noclear.conf
[Service]
TTYVTDisallocate=no

# reboot into new installation
exit
umount -R /mnt
reboot 

# user setup
useradd -m iliyan
passwd iliyan
groupadd sudo

# setup keyboard
mkdir /etc/X11/xorg.conf.d
cat /etc/X11/xorg.conf.d/00-keyboard.conf 
Section "InputClass"
        Identifier "system-keyboard"
        MatchIsKeyboard "on"
        Option "XkbLayout" "us,bg"
        Option "XkbModel" "pc104"
        Option "XkbVariant" "euro,phonetic"
        Option "XkbOptions" "grp:shifts_toggle,grp_led:scroll"
EndSection


# general groups
usermod -aG sudo,video,audio,scanner iliyan

# docker 
usermod -aG docker iliyan

# virtualbox
usermod -aG vboxusers iliyan

# nvidia optimus
usermod -aG bumblebee iliyan

# setup sudoers - see ./sudoers file

# install pacaur
https://gist.github.com/eldiaboloz/c05a3a7ccdf9bd6d1f75b6f9ae01e93c

# install all required packages - ./packages.txt

...

# create the symlinks

# login

# execute the xinitrc file
startx


